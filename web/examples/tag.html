<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Tag - vue</title>
    <link rel="stylesheet" href="../lib/css/uikit.min.css">
    <link rel="stylesheet" href="../lib/css/uikit.almost-flat.min.css">
    <script src="../lib/js/jquery-3.2.1.min.js"></script>
    <script src="../lib/js/uikit.min.js"></script>
    <script src="../lib/js/vue.min.js"></script>
</head>

<body>
    <div class="uk-container uk-container-center">
        <div class="uk-grid">
            <form v-on="submit: submit" class="uk-form uk-width-1-1">
                <div class="uk-form-icon uk-width-1-1">
                    <i class="uk-icon-quote-left"></i>
                    <input v-model="name" name="name" type="text" placeholder="请输入标题..." class="uk-width-1-1 uk-form-large uk-form-blank">
                </div>
                <div id="aricle-tag">
                    <v-tags :source.sync="source"></v-tags>
                </div>
                <div id="editormd">
                </div>
            </form>
        </div>
    </div>
    <link rel="stylesheet" href="../lib/custom/tags.css">
    <script src="../lib/custom/tags.js"></script>
    <link rel="stylesheet" href="../lib/editormd/css/editormd.css" />
    <script src="../lib/editormd/editormd.js"></script>
    <script>
    var app = new Vue({
        el: '#aricle-tag',
        data: {
            source: ['英雄联盟', '刀塔', '骚猪', '我是娇妹', '小米饭']
        },
        components: {
            'v-tags': components.tags
        }
    })

    var testEditor = editormd("editormd", {
        width: "100%",
        height: 600,
        path: '../lib/editormd/lib/',
        //theme : "dark",
        //previewTheme : "dark",
        //editorTheme : "pastel-on-dark",
        markdown: "",
        codeFold: true,
        //syncScrolling : false,
        saveHTMLToTextarea: true, // 保存 HTML 到 Textarea
        searchReplace: true,
        //watch : false,                // 关闭实时预览
        htmlDecode: "style,script,iframe|on*", // 开启 HTML 标签解析，为了安全性，默认不开启
        //toolbar  : false,             //关闭工具栏
        //previewCodeHighlight : false, // 关闭预览 HTML 的代码块高亮，默认开启
        emoji: true,
        taskList: true,
        tocm: false, // Using [TOCM]
        tex: true, // 开启科学公式TeX语言支持，默认关闭
        flowChart: true, // 开启流程图支持，默认关闭
        sequenceDiagram: true, // 开启时序/序列图支持，默认关闭,
        //dialogLockScreen : false,   // 设置弹出层对话框不锁屏，全局通用，默认为true
        //dialogShowMask : false,     // 设置弹出层对话框显示透明遮罩层，全局通用，默认为true
        //dialogDraggable : false,    // 设置弹出层对话框不可拖动，全局通用，默认为true
        //dialogMaskOpacity : 0.4,    // 设置透明遮罩层的透明度，全局通用，默认值为0.1
        //dialogMaskBgColor : "#000", // 设置透明遮罩层的背景颜色，全局通用，默认为#fff
        imageUpload: true,
        imageFormats: ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
        imageUploadURL: "",
        onload: function() {
            //console.log('onload', this);
            //this.fullscreen();
            //this.unwatch();
            //this.watch().fullscreen();

            //this.setMarkdown("#PHP");
            //this.width("100%");
            //this.height(480);
            //this.resize("100%", 640);
        },
        onchange: function(){
            var md = testEditor.getMarkdown();       // 获取 Markdown 源码
            var h1 = testEditor.getHTML();           // 获取 Textarea 保存的 HTML 源码
            var h2 = testEditor.getPreviewedHTML();  // 获取预览窗口里的 HTML，在开启 watch 且没有开启 saveHTMLToTextarea 时使用
            var vv = app.source;
            console.log(md);
            console.log(vv);
        },
        toolbarHandlers      : {
            save : function() {
                alert(app.source[0]);
            },
        },
    });


    
    </script>
</body>

</html>
